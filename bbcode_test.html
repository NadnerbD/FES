<html>
	<head>
		<script type="text/javascript" src="bbcode.js"></script>
		<script type="text/javascript">
			function preview(event) {
				event.preventDefault();
				var text = document.getElementById("input").value;
				var target = document.getElementById("preview");
				while(target.childNodes.length > 0) {
					target.removeChild(target.lastChild);
				}
				var parser = new bbcode();
				parser.registerEmotes({backstab: "http://nadru.dyndns.org/Images/Backstab.png"});
				target.appendChild(parser.render(text));
			}
		</script>
		<style type="text/css">
			p {
				margin: 0px;
			}
			p.double {
				margin-top: 1em;
			}
			blockquote {
				margin: 8px;
				padding: 8px;
				border: solid 1px #000;
				box-shadow: 2px 2px 4px #CCC;
				background-color: #CCC;
			}
		</style>
	</head>
	<body>
		<form onsubmit="preview(event)">
			<textarea rows="10" cols="80" id="input">[i]a[b]b[u]c[/i]d[/b]e[/u]
[s]test[/s]
&gt;&gt;0129385 &gt;&gt;blah
[i]blah[quote]te[/i][b]st[/quote]blah[/b]
[youtube =http://www.youtube.com/watch?v=UxPWYpcVI1c]

[color=#F00][size=24]te[/color]st[/size]
this is a :backstab:
[s][url=http://www.google.com]te[/s]st[/url]
[img]http://nadru.dyndns.org/Images/Backstab.png[/img]</textarea>
			<input type="submit" />
		</form>
		<div id="preview">
		</div>
	</body>
</html>
